{"version":3,"sources":["uni-app:///main.js","webpack:////Users/hupeng/hupeng/java/yshopb2c-open/yshopmall/yshop-mall-uniapp/pages/shop/IntegralGoodsCon/index.vue?a91c","webpack:////Users/hupeng/hupeng/java/yshopb2c-open/yshopmall/yshop-mall-uniapp/pages/shop/IntegralGoodsCon/index.vue?c723","webpack:////Users/hupeng/hupeng/java/yshopb2c-open/yshopmall/yshop-mall-uniapp/pages/shop/IntegralGoodsCon/index.vue?5280","webpack:////Users/hupeng/hupeng/java/yshopb2c-open/yshopmall/yshop-mall-uniapp/pages/shop/IntegralGoodsCon/index.vue?4d65","uni-app:///pages/shop/IntegralGoodsCon/index.vue","webpack:////Users/hupeng/hupeng/java/yshopb2c-open/yshopmall/yshop-mall-uniapp/pages/shop/IntegralGoodsCon/index.vue?ad6b","webpack:////Users/hupeng/hupeng/java/yshopb2c-open/yshopmall/yshop-mall-uniapp/pages/shop/IntegralGoodsCon/index.vue?dfbc"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","name","components","ProductConSwiper","UserEvaluation","CouponPop","ProductWindow","StorePoster","ShareInfo","data","shareInfoStatus","weixinStatus","mapShow","mapKey","posterData","image","title","price","code","posterImageStatus","animated","coupon","list","attr","cartAttr","productAttr","productSelect","isOpen","productValue","id","storeInfo","couponList","attrTxt","attrValue","cart_num","replyCount","replyChance","reply","priceName","CartCount","posters","banner","swiperRecommend","pagination","el","clickable","autoplay","loop","speed","observer","observeParents","goodList","systemStore","qqmapsdk","productConClass","tempName","isIntegral","computed","mounted","url","cookie","watch","console","methods","onShareAppMessage","imageUrl","path","success","uni","fail","icon","goHome","goShoppingCart","goCustomerList","goStoreList","goEvaluateList","query","telPhone","phoneNumber","showChang","updateTitle","setShareInfoStatus","shareCode","that","setPosterImageStatus","productCon","from","mask","then","res","goodArray","catch","duration","finally","DefaultSelect","value","ChangeCartNum","num","changeFun","couponTap","changecoupon","currentcoupon","coupons","q","page","limit","selecAttrTap","changeattr","ChangeAttr","setCollect","category","joinCart","goCat","productId","cartNum","new","uniqueId","complete","getCartCount","numType","setTimeout","tapBuy","listenerActionSheet","listenerActionClose","setOpenShare","href","desc","link","imgUrl"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AACyN;AACzN,gBAAgB,iNAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAg3B,CAAgB,myBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;AC8Ep4B;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eAEA;EACAC;EACAC;IACA;IACA;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;QACAA;QACAC;MACA;MACAC;QACAC;QACAC;QACAC;MACA;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;UACAC;UACAC;QACA;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;EACAC;IACA;IACA;IACA;MACAC;IACA;IACA;IACA;MACA;MACA;MACA;QACAC;MACA;IACA;MACA;IACA;IACA;IACA;IACA;EACA;EACAC;IACA1C;MACA2C;MACA;QACA;MACA;QACA;MACA;IACA;EACA;EACAC;IACAC;MACA;QACAhD;QACAiD;QACAC;QACAC;UACAC;YACApD;UACA;QACA;QACAqD;UACAD;YACApD;YACAsD;UACA;QACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;QACAP;MACA;IACA;IACAQ;MACA;QACAR;MACA;IACA;IACAS;MACA;QACAT;QACAU;UACA/C;QACA;MACA;IACA;IACAgD;MACAT;QACAU;QACAT;UACAP;QACA;MACA;IACA;IACAiB;MACA;QACAb;QACAU;MACA;IACA;IACAI;MACA;IAAA,CACA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;QACAC;QACAA;MACA;IACA;IACAC;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;QACAC;MACA;MACAlB;QACApD;QACAuE;MACA;MACA,4CACAC;QACAC;QACAN;QACA;QACAA;QACAA;QACAA;QACAA;QACAA;QACAA;QACAA;QACAA;QACAA;QACA;UACAA;QACA;UACAA;QACA;QACAA;QACAA;QACAA;QACA;QACA;QACA;QACA;UACA;UACA,iBACAO;YACApE;UACA;QACA;QACA6D;QACAA;QACAA;QACAA;QACAA;MACA,GACAQ;QACAvB;UACApD;UACAsD;UACAsB;QACA;MACA,GACAC;QACAzB;MACA;IACA;IACA;IACA0B;MACA;MACA;MACA;QACA;QACAC;MACA;MACA;MACA;MACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;QACAtE;MACA;MACA;MACA;MACA;MACA;MACA;QACAuE;QACA;UACA;UACA;QACA;UACA;UACA;QACA;MACA;QACAA;QACA;UACA;UACA;QACA;UACA;UACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACAhB;MACAA;IACA;IACAiB;MACA;MACA;IACA;IACAC;MACA;MACAlB;MACAA;IACA;IACA;IACAmB;MACA;QACAC;UACAC;UACAC;QACA;MACA;QACAtB;QACAA;MACA;IACA;IACA;IACAuB;MACA;MACA;IACA;IACAC;MACA;MACA7C;MACA;MACA;IACA;IACA;IACA8C;MACA;;MAEA;MACA9C;MACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;IACA;IACA;IACA+C;MACA;QACAhF;QACAiF;MACA;QACA;UACA3B;QACA;MACA;QACA;UACAA;QACA;MACA;IACA;IACA;IACA4B;MACA;MACA;IACA;IACA;IACAC;MACA;QACAtF;MACA;MACA;QACA;QACAyD;MACA;QACA,gDACAA;MACA;MACA;MACA;MACA;MACA;QACAf;UACApD;UACAsD;UACAsB;QACA;QACA;MACA;MACA;QACAqB;QACAC;QACAC;QACAC;MACA;MACA,2BACA5B;QACA1B;QACAqB;QACAA;QACA;UACA;YACAf;cACApD;cACAsD;cACAsB;YACA;YACA;UACA;UACAT;YACAjB;YACAU;cACA/C;cACA2B;YACA;UACA;QACA;UACAY;YACApD;YACAsD;YACAsB;YACAyB;cACAlC;YACA;UACA;QACA;MACA,GACAQ;QACA7B;QACAqB;QACAf;UACApD;UACAsD;UACAsB;QACA;MACA;IACA;IACA;IACA0B;MACA;MACA;MACA;QACA;UACAC;QACA;UACApC;UACA;UACA;YACAA;YACAqC;cACArC;YACA;UACA;QACA;MACA;IACA;IACA;IACAsC;MACA;MACA;IACA;IACAC;MACA;QACA;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACA;MACA;QACA;UACA;YACAC;YACA;cACAC;cACA9G;cACA+G;cACAC;YACA;YACA,qGACAxC,wBACAG;cACA;gBACAF;gBACAA;cACA;YACA;UACA;QACA;UACA;YACAqC;YACA9G;YACA+G;YACAC;UACA;UACA,qGACAxC,wBACAG;YACA;cACAF;cACAA;YACA;UACA;QACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACznBA;AAAA;AAAA;AAAA;AAA2mD,CAAgB,25CAAG,EAAC,C;;;;;;;;;;;ACA/nD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/shop/IntegralGoodsCon/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/shop/IntegralGoodsCon/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=f06688ea&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=f06688ea&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f06688ea\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/shop/IntegralGoodsCon/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=f06688ea&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\n  <view :class=\"productConClass\">\n    <view v-if=\"storeInfo.id\">\n      <!-- 轮播图 -->\n      <product-con-swiper :img-urls=\"storeInfo.sliderImageArr\"></product-con-swiper>\n\n      <!-- 商品信息描述 -->\n      <view class=\"wrapper\">\n        <view class=\"share acea-row row-between row-bottom\">\n          <view class=\"money font-color-red\">\n            <text class=\"num\">{{ attr.productSelect.integral || storeInfo.integral }}积分</text>\n          </view>\n        </view>\n        <view class=\"introduce\">{{ storeInfo.storeName }}</view>\n        <view class=\"label acea-row row-between-wrapper\">\n          <text>库存:{{ storeInfo.stock }}{{ storeInfo.unitName }}</text>\n          <text>销量:{{ storeInfo.sales }}{{ storeInfo.unitName }}</text>\n        </view>\n      </view>\n\n      <!-- 规格 -->\n      <view class=\"attribute acea-row row-between-wrapper\" @click=\"selecAttrTap\">\n        <view>\n          <text>{{ attrTxt }}：</text>\n          <text class=\"atterTxt\">{{ attrValue }}</text>\n        </view>\n        <view class=\"iconfont icon-jiantou\"></view>\n      </view>\n\n      <!-- 用户评价 -->\n      <view class=\"userEvaluation\" v-if=\"replyCount\">\n        <view class=\"title acea-row row-between-wrapper\">\n          <view>用户评价({{ replyCount }})</view>\n          <text @click=\"goEvaluateList(id)\" class=\"praise\">\n            <text class=\"font-color-red\">{{ replyChance }}%</text>好评率\n            <text class=\"iconfont icon-jiantou\"></text>\n          </text>\n        </view>\n        <user-evaluation :reply=\"reply\"></user-evaluation>\n      </view>\n\n      <!-- 商品详情 -->\n      <view class=\"product-intro\">\n        <text class=\"title\"><text>产品介绍</text></text>\n        <view class=\"conter\" v-html=\"storeInfo.description\"></view>\n      </view>\n\n      <view style=\"height: 100rpx\"></view>\n      <!-- 操作栏 -->\n      <view class=\"footer acea-row row-between-wrapper\">\n        <view class=\"item\" @click=\"goHome\">\n          <view class=\"iconfont icon-shouye-xianxing\"></view>\n          <text>首页</text>\n        </view>\n        <view class=\"bnt in-bnt acea-row\">\n          <view class=\"buy\" @click=\"tapBuy\">\n            <text>立即兑换</text>\n          </view>\n        </view>\n      </view>\n\n      <!-- 商品规格弹窗 -->\n      <ProductWindow :isIntegral=\"isIntegral\" v-on:changeFun=\"changeFun\" :attr=\"attr\" :cartNum=\"cart_num\"></ProductWindow>\n      <!-- 分享海报 -->\n      <StorePoster v-on:setPosterImageStatus=\"setPosterImageStatus\" :posterImageStatus=\"posterImageStatus\" :posterData=\"posterData\" :goodId=\"id\"></StorePoster>\n    </view>\n  </view>\n</template>\n\n<script>\n// import { swiper, swiperSlide } from \"vue-awesome-swiper\";\n\nimport ProductConSwiper from '@/components/ProductConSwiper'\nimport UserEvaluation from '@/components/UserEvaluation'\nimport CouponPop from '@/components/CouponPop'\nimport ProductWindow from '@/components/ProductWindow'\nimport StorePoster from '@/components/StorePoster'\nimport ShareInfo from '@/components/ShareInfo'\nimport { getProductDetail, postCartAdd, getCartCount, getProductCode } from '@/api/store'\nimport { getCoupon, getCollectAdd, getCollectDel, getUserInfo } from '@/api/user'\nimport cookie from '@/utils/store/cookie'\nimport { isWeixin, PosterCanvas, handleQrCode, handleUrlParam, getCurrentPageUrlWithArgs } from '@/utils'\nimport { wechatEvevt } from '@/libs/wechat'\nimport { imageBase64 } from '@/api/public'\nimport { mapGetters } from 'vuex'\n\nexport default {\n  name: 'GoodsCon',\n  components: {\n    // swiper,\n    // swiperSlide,\n    ProductConSwiper,\n    UserEvaluation,\n    CouponPop,\n    ProductWindow,\n    StorePoster,\n    ShareInfo,\n  },\n  data: function() {\n    return {\n      shareInfoStatus: false,\n      weixinStatus: false,\n      mapShow: false,\n      mapKey: '',\n      posterData: {\n        image: '',\n        title: '',\n        price: '',\n        code: '',\n      },\n      posterImageStatus: false,\n      animated: false,\n      coupon: {\n        coupon: false,\n        list: [],\n      },\n      attr: {\n        cartAttr: false,\n        productAttr: [],\n        productSelect: {},\n      },\n      isOpen: false, //是否打开属性组件\n      productValue: [],\n      id: 0,\n      storeInfo: {},\n      couponList: [],\n      attrTxt: '请选择',\n      attrValue: '',\n      cart_num: 1, //购买数量\n      replyCount: '',\n      replyChance: '',\n      reply: [],\n      priceName: 0,\n      CartCount: 0,\n      posters: false,\n      banner: [{}, {}],\n      swiperRecommend: {\n        pagination: {\n          el: '.swiper-pagination',\n          clickable: true,\n        },\n        autoplay: false,\n        loop: false,\n        speed: 1000,\n        observer: true,\n        observeParents: true,\n      },\n      goodList: [],\n      systemStore: {},\n      qqmapsdk: null,\n      productConClass: 'product-con',\n      tempName: '全国包邮',\n      isIntegral: false,\n    }\n  },\n  computed: mapGetters(['isLogin', 'location']),\n  mounted: function() {\n    this.$store.commit('get_to', 'goodcon')\n    let url = handleQrCode()\n    if (!url) {\n      url = handleUrlParam(getCurrentPageUrlWithArgs())\n    }\n    this.coupons()\n    if (url && url.id) {\n      this.id = url.id\n      let urlSpread = parseInt(url.spread)\n      if (urlSpread) {\n        cookie.set('spread', urlSpread)\n      }\n    } else {\n      this.id = this._route.query.id\n    }\n    this.isIntegral = url.isIntegral == 'true'\n    this.productCon()\n    this.setOpenShare()\n  },\n  watch: {\n    posterImageStatus(status) {\n      console.log(status)\n      if (status) {\n        this.productConClass = 'noscroll product-con'\n      } else {\n        this.productConClass = 'product-con'\n      }\n    },\n  },\n  methods: {\n    onShareAppMessage: function() {\n      return {\n        title: this.storeInfo.storeName,\n        imageUrl: this.storeInfo.image,\n        path: 'pages/shop/GoodsCon/index?id=' + this.storeInfo.id + '&spread=' + uni.getStorageSync('uid') + '&pageType=good&codeType=routine',\n        success(res) {\n          uni.showToast({\n            title: '分享成功',\n          })\n        },\n        fail(res) {\n          uni.showToast({\n            title: '分享失败',\n            icon: 'none',\n          })\n        },\n      }\n    },\n    goHome() {\n      this.$yrouter.switchTab('/pages/home/index')\n    },\n    goShoppingCart() {\n      this.$yrouter.switchTab('/pages/shop/ShoppingCart/index')\n    },\n    goCustomerList() {\n      this.$yrouter.push({\n        path: '/pages/user/CustomerList/index',\n      })\n    },\n    goStoreList() {\n      this.$yrouter.push({\n        path: '/pages/shop/StoreList/index',\n      })\n    },\n    goEvaluateList(id) {\n      this.$yrouter.push({\n        path: '/pages/shop/EvaluateList/index',\n        query: {\n          id,\n        },\n      })\n    },\n    telPhone(phoneNumber) {\n      uni.makePhoneCall({\n        phoneNumber: phoneNumber,\n        fail() {\n          console.log('取消拨打')\n        },\n      })\n    },\n    showChang: function(data) {\n      this.$yrouter.push({\n        path: '/pages/map/index',\n        query: data,\n      })\n    },\n    updateTitle() {\n      // document.title = this.storeInfo.storeName || this.$yroute.meta.title;\n    },\n    setShareInfoStatus: function() {\n      this.shareInfoStatus = !this.shareInfoStatus\n      this.posters = false\n    },\n    shareCode: function() {\n      var that = this\n      getProductCode(that.id).then(res => {\n        that.posterData.code = res.data.code\n        that.listenerActionSheet()\n      })\n    },\n    setPosterImageStatus: function() {\n      this.posterImageStatus = !this.posterImageStatus\n      this.posters = false\n    },\n    //产品详情接口；\n    productCon: function() {\n      let that = this\n      let from = this.location\n      if (this.$deviceType == 'app') {\n        from.from = 'app'\n      }\n      uni.showLoading({\n        title: '加载中',\n        mask: true,\n      })\n      getProductDetail(that.id, from)\n        .then(res => {\n          res.data.storeInfo.description = res.data.storeInfo.description.replace(/\\<img/gi, '<img style=\"max-width:100%;height:auto;\"')\n          that.$set(that, 'storeInfo', res.data.storeInfo)\n          // 给 attr 赋值，将请求回来的规格赋值给 attr\n          that.$set(that.attr, 'productAttr', res.data.productAttr)\n          that.$set(that, 'productValue', res.data.productValue)\n          that.$set(that, 'replyCount', res.data.replyCount)\n          that.$set(that, 'replyChance', res.data.replyChance)\n          that.reply = res.data.reply ? [res.data.reply] : []\n          that.$set(that, 'reply', that.reply)\n          that.$set(that, 'priceName', res.data.priceName)\n          that.$set(that, 'tempName', res.data.tempName)\n          that.posterData.image = that.storeInfo.image\n          if (that.storeInfo.storeName.length > 30) {\n            that.posterData.title = that.storeInfo.storeName.substring(0, 30) + '...'\n          } else {\n            that.posterData.title = that.storeInfo.storeName\n          }\n          that.posterData.price = that.storeInfo.price\n          that.posterData.code = that.storeInfo.codeBase\n          that.systemStore = res.data.systemStore\n          let good_list = res.data.goodList || []\n          let goodArray = []\n          let count = Math.ceil(good_list.length / 6)\n          for (let i = 0; i < count; i++) {\n            var list = good_list.slice(i * 6, 6)\n            if (list.length)\n              goodArray.push({\n                list: list,\n              })\n          }\n          that.mapKay = res.data.mapKay\n          that.$set(that, 'goodList', goodArray)\n          that.updateTitle()\n          that.DefaultSelect()\n          that.getCartCount()\n        })\n        .catch(err => {\n          uni.showToast({\n            title: err.msg || err.response.data.msg || err.response.data.message,\n            icon: 'none',\n            duration: 2000,\n          })\n        })\n        .finally(() => {\n          uni.hideLoading()\n        })\n    },\n    //默认选中属性；\n    DefaultSelect: function() {\n      let productAttr = this.attr.productAttr\n      let value = []\n      for (let i = 0; i < productAttr.length; i++) {\n        this.$set(productAttr[i], 'index', 0)\n        value.push(productAttr[i].attrValueArr[0])\n      }\n      //sort();排序函数:数字-英文-汉字；\n      let productSelect = this.productValue[value.sort().join(',')]\n      if (productSelect && productAttr.length) {\n        this.$set(this.attr.productSelect, 'store_name', this.storeInfo.storeName)\n        this.$set(this.attr.productSelect, 'image', productSelect.image)\n        this.$set(this.attr.productSelect, 'price', productSelect.price)\n        this.$set(this.attr.productSelect, 'stock', productSelect.stock)\n        this.$set(this.attr.productSelect, 'unique', productSelect.unique)\n        this.$set(this.attr.productSelect, 'integral', productSelect.integral)\n        this.$set(this.attr.productSelect, 'cart_num', 1)\n        this.$set(this, 'attrValue', value.sort().join(','))\n        this.$set(this, 'attrTxt', '已选择')\n      } else if (!productSelect && productAttr.length) {\n        this.$set(this.attr.productSelect, 'store_name', this.storeInfo.storeName)\n        this.$set(this.attr.productSelect, 'image', this.storeInfo.image)\n        this.$set(this.attr.productSelect, 'price', this.storeInfo.price)\n        this.$set(this.attr.productSelect, 'integral', this.storeInfo.integral)\n        this.$set(this.attr.productSelect, 'stock', 0)\n        this.$set(this.attr.productSelect, 'unique', '')\n        this.$set(this.attr.productSelect, 'cart_num', 0)\n        this.$set(this, 'attrValue', '')\n        this.$set(this, 'attrTxt', '请选择')\n      } else if (!productSelect && !productAttr.length) {\n        this.$set(this.attr.productSelect, 'store_name', this.storeInfo.storeName)\n        this.$set(this.attr.productSelect, 'image', this.storeInfo.image)\n        this.$set(this.attr.productSelect, 'price', this.storeInfo.price)\n        this.$set(this.attr.productSelect, 'stock', this.storeInfo.stock)\n        this.$set(this.attr.productSelect, 'integral', this.storeInfo.integral)\n        this.$set(this.attr.productSelect, 'unique', this.storeInfo.unique || '')\n        this.$set(this.attr.productSelect, 'cart_num', 1)\n        this.$set(this, 'attrValue', '')\n        this.$set(this, 'attrTxt', '请选择')\n      }\n    },\n    //购物车；\n    ChangeCartNum: function(changeValue) {\n      //changeValue:是否 加|减\n      //获取当前变动属性\n      let productSelect = this.productValue[this.attrValue]\n      //如果没有属性,赋值给商品默认库存\n      if (productSelect === undefined && !this.attr.productAttr.length) {\n        productSelect = this.attr.productSelect\n      }\n      //无属性值即库存为0；不存在加减；\n      if (productSelect === undefined) return\n      let stock = productSelect.stock || 0\n      let num = this.attr.productSelect\n      if (changeValue) {\n        num.cart_num++\n        if (num.cart_num > stock) {\n          this.$set(this.attr.productSelect, 'cart_num', stock)\n          this.$set(this, 'cart_num', stock)\n        } else {\n          this.$set(this.attr.productSelect, 'cart_num', num.cart_num)\n          this.$set(this, 'cart_num', num.cart_num)\n        }\n      } else {\n        num.cart_num--\n        if (num.cart_num < 1) {\n          this.$set(this.attr.productSelect, 'cart_num', 1)\n          this.$set(this, 'cart_num', 1)\n        } else {\n          this.$set(this.attr.productSelect, 'cart_num', num.cart_num)\n          this.$set(this, 'cart_num', num.cart_num)\n        }\n      }\n    },\n    //将父级向子集多次传送的函数合二为一；\n    changeFun: function(opt) {\n      if (typeof opt !== 'object') opt = {}\n      let action = opt.action || ''\n      let value = opt.value === undefined ? '' : opt.value\n      this[action] && this[action](value)\n    },\n    //打开优惠券插件；\n    couponTap: function() {\n      let that = this\n      that.coupons()\n      that.coupon.coupon = true\n    },\n    changecoupon: function(msg) {\n      this.coupon.coupon = msg\n      this.coupons()\n    },\n    currentcoupon: function(res) {\n      let that = this\n      that.coupon.coupon = false\n      that.$set(that.coupon.list[res], 'is_use', true)\n    },\n    //可领取优惠券接口；\n    coupons: function() {\n      let that = this,\n        q = {\n          page: 1,\n          limit: 20,\n        }\n      getCoupon(q).then(res => {\n        that.$set(that, 'couponList', res.data || [])\n        that.$set(that.coupon, 'list', res.data)\n      })\n    },\n    //打开属性插件；\n    selecAttrTap: function() {\n      this.attr.cartAttr = true\n      this.isOpen = true\n    },\n    changeattr: function(msg) {\n      // 修改了规格\n      console.log(msg)\n      this.attr.cartAttr = msg\n      this.isOpen = false\n    },\n    //选择属性；\n    ChangeAttr: function(res) {\n      // 修改了规格\n\n      let productSelect = this.productValue[res.value]\n      console.log(productSelect)\n      if (productSelect) {\n        this.attr.productAttr[res.indexw].index = res.indexn\n        this.$set(this.attr.productSelect, 'image', productSelect.image)\n        this.$set(this.attr.productSelect, 'price', productSelect.price)\n        this.$set(this.attr.productSelect, 'stock', productSelect.stock)\n        this.$set(this.attr.productSelect, 'unique', productSelect.unique)\n        this.$set(this.attr.productSelect, 'integral', productSelect.integral)\n        this.$set(this.attr.productSelect, 'cart_num', 1)\n        this.$set(this, 'attrValue', res.value)\n        this.$set(this, 'attrTxt', '已选择')\n      } else {\n        this.$set(this.attr.productSelect, 'image', this.storeInfo.image)\n        this.$set(this.attr.productSelect, 'price', this.storeInfo.price)\n        this.$set(this.attr.productSelect, 'integral', this.storeInfo.price)\n        this.$set(this.attr.productSelect, 'stock', 0)\n        this.$set(this.attr.productSelect, 'unique', '')\n        this.$set(this.attr.productSelect, 'cart_num', 0)\n        this.$set(this, 'attrValue', '')\n        this.$set(this, 'attrTxt', '请选择')\n      }\n    },\n    //收藏商品\n    setCollect: function() {\n      let that = this,\n        id = that.storeInfo.id,\n        category = 'collect'\n      if (that.storeInfo.userCollect) {\n        getCollectDel(id, category).then(function() {\n          that.storeInfo.userCollect = !that.storeInfo.userCollect\n        })\n      } else {\n        getCollectAdd(id, category).then(function() {\n          that.storeInfo.userCollect = !that.storeInfo.userCollect\n        })\n      }\n    },\n    //  点击加入购物车按钮\n    joinCart: function() {\n      //0=加入购物车\n      this.goCat(0)\n    },\n    // 加入购物车；\n    goCat: function(news) {\n      let that = this,\n        productSelect = that.productValue[this.attrValue]\n      //打开属性\n      if (that.attrValue) {\n        //默认选中了属性，但是没有打开过属性弹窗还是自动打开让用户查看默认选中的属性\n        that.attr.cartAttr = !that.isOpen ? true : false\n      } else {\n        if (that.isOpen) that.attr.cartAttr = true\n        else that.attr.cartAttr = !that.attr.cartAttr\n      }\n      //只有关闭属性弹窗时进行加入购物车\n      if (that.attr.cartAttr === true && that.isOpen === false) return (that.isOpen = true)\n      //如果有属性,没有选择,提示用户选择\n      if (that.attr.productAttr.length && productSelect === undefined && that.isOpen === true) {\n        uni.showToast({\n          title: '产品库存不足，请选择其它',\n          icon: 'none',\n          duration: 2000,\n        })\n        return\n      }\n      let q = {\n        productId: that.id,\n        cartNum: that.attr.productSelect.cart_num,\n        new: news,\n        uniqueId: that.attr.productSelect !== undefined ? that.attr.productSelect.unique : '',\n      }\n      postCartAdd(q)\n        .then(function(res) {\n          console.log(res)\n          that.isOpen = false\n          that.attr.cartAttr = false\n          if (news) {\n            if (!res.data) {\n              uni.showToast({\n                title: res.msg || res.data.msg || res.data.message,\n                icon: 'none',\n                duration: 2000,\n              })\n              return\n            }\n            that.$yrouter.push({\n              path: '/pages/order/OrderSubmission/index',\n              query: {\n                id: res.data.cartId,\n                isIntegral: that.isIntegral,\n              },\n            })\n          } else {\n            uni.showToast({\n              title: '添加购物车成功',\n              icon: 'success',\n              duration: 2000,\n              complete: () => {\n                that.getCartCount(true)\n              },\n            })\n          }\n        })\n        .catch(error => {\n          console.log(error)\n          that.isOpen = false\n          uni.showToast({\n            title: error.msg || error.response.data.msg || error.response.data.message,\n            icon: 'none',\n            duration: 2000,\n          })\n        })\n    },\n    //获取购物车数量\n    getCartCount: function(isAnima) {\n      let that = this\n      const isLogin = that.isLogin\n      if (isLogin) {\n        getCartCount({\n          numType: 0,\n        }).then(res => {\n          that.CartCount = res.data.count\n          //加入购物车后重置属性\n          if (isAnima) {\n            that.animated = true\n            setTimeout(function() {\n              that.animated = false\n            }, 500)\n          }\n        })\n      }\n    },\n    //立即购买；\n    tapBuy: function() {\n      //  1=直接购买\n      this.goCat(1)\n    },\n    listenerActionSheet: function() {\n      if (isWeixin() === true) {\n        this.weixinStatus = true\n      }\n      this.posters = true\n    },\n    listenerActionClose: function() {\n      this.posters = false\n    },\n    setOpenShare: function() {\n      var data = this.storeInfo\n      var href = this.location.href\n      if (this.$deviceType == 'weixin') {\n        if (this.isLogin) {\n          getUserInfo().then(res => {\n            href = href.indexOf('?') === -1 ? href + '?spread=' + res.data.uid : href + '&spread=' + res.data.uid\n            var configAppMessage = {\n              desc: data.storeInfo,\n              title: data.storeName,\n              link: href,\n              imgUrl: data.image,\n            }\n            wechatEvevt(['updateAppMessageShareData', 'updateTimelineShareData'], configAppMessage)\n              .then(res => {})\n              .catch(res => {\n                if (res.is_ready) {\n                  res.wx.updateAppMessageShareData(configAppMessage)\n                  res.wx.updateTimelineShareData(configAppMessage)\n                }\n              })\n          })\n        } else {\n          var configAppMessage = {\n            desc: data.storeInfo,\n            title: data.storeName,\n            link: href,\n            imgUrl: data.image,\n          }\n          wechatEvevt(['updateAppMessageShareData', 'updateTimelineShareData'], configAppMessage)\n            .then(res => {})\n            .catch(res => {\n              if (res.is_ready) {\n                res.wx.updateAppMessageShareData(configAppMessage)\n                res.wx.updateTimelineShareData(configAppMessage)\n              }\n            })\n        }\n      }\n    },\n  },\n}\n</script>\n\n<style scoped lang=\"less\">\n.geoPage {\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  z-index: 10000;\n}\n\n.product-con .store-info {\n  margin-top: 0.2 * 100rpx;\n  background-color: #fff;\n}\n\n.product-con .store-info .title {\n  padding: 0 0.3 * 100rpx;\n  font-size: 0.28 * 100rpx;\n  color: #282828;\n  height: 0.8 * 100rpx;\n  line-height: 0.8 * 100rpx;\n  border-bottom: 0.01 * 100rpx solid #f5f5f5;\n}\n\n.product-con .store-info .info {\n  padding: 0 0.3 * 100rpx;\n  height: 1.26 * 100rpx;\n}\n\n.product-con .store-info .info .picTxt {\n  width: 100%;\n  display: flex;\n  align-items: center;\n}\n\n.product-con .store-info .info .picTxt .pictrue {\n  width: 0.76 * 100rpx;\n  height: 0.76 * 100rpx;\n  margin-right: 0.2 * 100rpx;\n}\n\n.product-con .store-info .info .picTxt .pictrue image {\n  width: 100%;\n  height: 100%;\n  border-radius: 0.06 * 100rpx;\n}\n\n.product-con .store-info .info .picTxt .text {\n  flex: 1;\n}\n\n.product-con .store-info .info .picTxt .text .name {\n  font-size: 0.3 * 100rpx;\n  color: #282828;\n}\n\n.product-con .store-info .info .picTxt .text .address {\n  font-size: 0.24 * 100rpx;\n  color: #666;\n  margin-top: 0.03 * 100rpx;\n}\n\n.product-con .store-info .info .picTxt .text .address .iconfont {\n  color: #707070;\n  font-size: 0.18 * 100rpx;\n  margin-left: 0.1 * 100rpx;\n}\n\n.product-con .store-info .info .picTxt .addressBox {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n}\n\n.product-con .store-info .info .picTxt .addressBox .iconfont {\n  font-size: 0.4 * 100rpx;\n}\n\n.product-con .store-info .info .picTxt .addressBox .addressTxt {\n  font-size: 0.24 * 100rpx;\n  color: #eb3729;\n}\n\n.product-con .store-info .praise {\n  font-size: 0.28 * 100rpx;\n  color: #808080;\n}\n\n.product-con .store-info .praise .iconfont {\n  font-size: 0.28 * 100rpx;\n}\n\n.product-con .superior {\n  background-color: #fff;\n  margin-top: 0.2 * 100rpx;\n}\n\n.product-con .superior .title {\n  height: 0.98 * 100rpx;\n}\n\n.product-con .superior .title image {\n  width: 0.3 * 100rpx;\n  height: 0.3 * 100rpx;\n}\n\n.product-con .superior .title .titleTxt {\n  margin: 0 0.2 * 100rpx;\n  font-size: 0.3 * 100rpx;\n  background-image: linear-gradient(to right, #f57a37 0%, #f21b07 100%);\n  background-image: -webkit-linear-gradient(to right, #f57a37 0%, #f21b07 100%);\n  background-image: -moz-linear-gradient(to right, #f57a37 0%, #f21b07 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n}\n\n.product-con .superior .slider-banner {\n  width: 6.9 * 100rpx;\n  margin: 0 auto;\n  padding-bottom: 0.2 * 100rpx;\n}\n\n.product-con .superior .slider-banner .list {\n  width: 100%;\n  padding-bottom: 0.2 * 100rpx;\n}\n\n.product-con .superior .slider-banner .list .item {\n  width: 2.15 * 100rpx;\n  margin: 0 0.22 * 100rpx 0.3 * 100rpx 0;\n  font-size: 0.26 * 100rpx;\n}\n\n.product-con .superior .slider-banner .list .item:nth-of-type(3n) {\n  margin-right: 0;\n}\n\n.product-con .superior .slider-banner .list .item .pictrue {\n  width: 100%;\n  height: 2.15 * 100rpx;\n}\n\n.product-con .superior .slider-banner .list .item .pictrue image {\n  width: 100%;\n  height: 100%;\n  border-radius: 0.06 * 100rpx;\n}\n\n.product-con .superior .slider-banner .list .item .name {\n  color: #282828;\n  margin-top: 0.12 * 100rpx;\n}\n\n.product-con .superior .slider-banner .swiper-pagination-bullet {\n  background-color: #999;\n}\n\n.product-con .superior .slider-banner .swiper-pagination-bullet-active {\n  background-color: #e93323;\n}\n\n.mask {\n  -webkit-filter: blur(2px);\n  -moz-filter: blur(2px);\n  -ms-filter: blur(2px);\n  filter: blur(2px);\n}\n\n.product-con .product-intro .conter view {\n  width: 100% !important;\n}\n\n.generate-posters {\n  width: 100%;\n  height: 1.7 * 100rpx;\n  background-color: #fff;\n  position: fixed;\n  left: 0;\n  bottom: 0;\n  z-index: 99;\n  transform: translate3d(0, 100%, 0);\n  -webkit-transform: translate3d(0, 100%, 0);\n  -ms-transform: translate3d(0, 100%, 0);\n  -moz-transform: translate3d(0, 100%, 0);\n  -o-transform: translate3d(0, 100%, 0);\n  transition: all 0.3s cubic-bezier(0.25, 0.5, 0.5, 0.9);\n  -webkit-transition: all 0.3s cubic-bezier(0.25, 0.5, 0.5, 0.9);\n  -moz-transition: all 0.3s cubic-bezier(0.25, 0.5, 0.5, 0.9);\n  -o-transition: all 0.3s cubic-bezier(0.25, 0.5, 0.5, 0.9);\n}\n\n.generate-posters.on {\n  transform: translate3d(0, 0, 0);\n  -webkit-transform: translate3d(0, 0, 0);\n  -ms-transform: translate3d(0, 0, 0);\n  -moz-transform: translate3d(0, 0, 0);\n  -o-transform: translate3d(0, 0, 0);\n}\n\n.generate-posters .item {\n  flex: 50%;\n  -webkit-flex: 50%;\n  -ms-flex: 50%;\n  text-align: center;\n}\n\n.generate-posters .item .iconfont {\n  font-size: 0.8 * 100rpx;\n  color: #5eae72;\n}\n\n.generate-posters .item .iconfont.icon-haibao {\n  color: #5391f1;\n}\n\n.noscroll {\n  height: 100%;\n  overflow: hidden;\n}\n.product-con .footer {\n  .in-bnt {\n    width: auto;\n    flex: 1;\n    margin-left: 30rpx;\n    & > view {\n      width: 100%;\n      border-radius: 50rpx;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=f06688ea&scoped=true&lang=less&\"; export default mod; export * from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=f06688ea&scoped=true&lang=less&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1743735225221\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}