{"version":3,"sources":["webpack:////Users/hupeng/hupeng/java/yshopb2c-open/yshopmall/yshop-mall-uniapp/pages/user/User/index.vue?6751","webpack:////Users/hupeng/hupeng/java/yshopb2c-open/yshopmall/yshop-mall-uniapp/pages/user/User/index.vue?5489","webpack:////Users/hupeng/hupeng/java/yshopb2c-open/yshopmall/yshop-mall-uniapp/pages/user/User/index.vue?f224","webpack:////Users/hupeng/hupeng/java/yshopb2c-open/yshopmall/yshop-mall-uniapp/pages/user/User/index.vue?9174","uni-app:///pages/user/User/index.vue","webpack:////Users/hupeng/hupeng/java/yshopb2c-open/yshopmall/yshop-mall-uniapp/pages/user/User/index.vue?57fa","webpack:////Users/hupeng/hupeng/java/yshopb2c-open/yshopmall/yshop-mall-uniapp/pages/user/User/index.vue?7b28","uni-app:///main.js","webpack:////Users/hupeng/hupeng/java/yshopb2c-open/yshopmall/yshop-mall-uniapp/pages/authorization/index.vue?dfd0","webpack:////Users/hupeng/hupeng/java/yshopb2c-open/yshopmall/yshop-mall-uniapp/pages/authorization/index.vue?3a24","webpack:////Users/hupeng/hupeng/java/yshopb2c-open/yshopmall/yshop-mall-uniapp/pages/authorization/index.vue?c772","webpack:////Users/hupeng/hupeng/java/yshopb2c-open/yshopmall/yshop-mall-uniapp/pages/authorization/index.vue?8c75","uni-app:///pages/authorization/index.vue","webpack:////Users/hupeng/hupeng/java/yshopb2c-open/yshopmall/yshop-mall-uniapp/pages/authorization/index.vue?3bd9","webpack:////Users/hupeng/hupeng/java/yshopb2c-open/yshopmall/yshop-mall-uniapp/pages/authorization/index.vue?48f1"],"names":["name","components","SwitchWindow","Authorization","props","data","canIUseGetUserProfile","MyMenus","switchActive","isWeixin","computed","onLoad","methods","toLogin","goReturnList","goMyOrder","path","query","type","goBindPhone","goUserCoupon","goIntegral","goUserPromotion","goUserAccount","goPersonalData","getPhoneNumber","uni","title","encryptedData","iv","then","icon","duration","catch","console","getUserInfo","getUserInfoProfile","wx","lang","desc","success","reject","provider","code","changeswitch","MenuUser","goPages","goPages2","isIntegral","watch","userInfo","onShow","onHide","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","authorize","isChecked","mounted","onUnload","onChange","goNewsDetail","id","back","getUserInfoBtn","getLoginCode","phoneLoginBefore","phoneLogin","cookie","spread","store"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACc;;;AAGlE;AACyN;AACzN,gBAAgB,iNAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAg3B,CAAgB,myBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;ACuNp4B;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAEA;AAAA,eAEA;EACAA;EACAC;IACAC;IACAC;EACA;EACAC;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;EACAC;IACA;MACA;IACA;EACA;EACAC,yCACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;QACAC;QACAC;UACAC;QACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACA;MACA;QACAC;UACAC;QACA;QACA;UACAC;UACAC;QACA,GACAC;UACA;UACA;UACAJ;UACAA;YACAC;YACAI;YACAC;UACA;QACA,GACAC;UACAP;UACA;UACAQ;UACAR;YACAC;YACAI;YACAC;UACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;QACAN;UACAC;UACAI;UACAC;QACA;MACA;IACA;IACA;IACAG;MACA;QACAT;UACAC;UACAI;UACAC;QACA;QACA;MACA;IACA;IACA;IACAI;MAAA;MACAC;QACAC;QACAC;QACAC;UACAd;YACAC;YACAK;UACA;UACA;YACA;YACA;cACAS;YACA;YACA;YACAf;cACAgB;cACAF;gBAAA;kBAAA;oBAAA;sBAAA;wBAAA;0BACA;4BACAZ;4BACAC;4BACAc;0BACA;4BACA;8BACA;8BACA;4BACA;8BACAjB;gCACAC;gCACAK;8BACA;4BACA;0BACA;wBAAA;wBAAA;0BAAA;sBAAA;oBAAA;kBAAA;gBAAA,CACA;gBAAA;kBAAA;gBAAA;gBAAA;cAAA;YACA;UACA;QACA;MACA;IACA;IACAY;MACA;IACA;IACA;IACAC;MAAA;MACA,yBACAf;QACAJ;QACA;MACA,GACAO;QACAP;QACAQ;MACA;IACA;IACAY;MACA;MACA;QACA;UACApB;YACAC;YACAI;YACAC;UACA;UACA;QACA;MACA;MAEA;QACAN;UACAC;UACAI;UACAC;QACA;QACA;MACA;MACAE;MACA;QACAR;UACAC;UACAI;UACAC;QACA;QACA;MACA;MAEA;QACAhB;MACA;IACA;IACA+B;MACA;QACA/B;QACAC;UACA;UACAU;UACAqB;QACA;MACA;IACA;EAAA,EACA;EACAC;IACAC;MACA;IACA;EACA;EACAC;IACA;MACA;IACA;IACA;MACAjB;MACA;MACAR;QACAC;MACA;MACA;MACA;MACA;IACA;EACA;EACAyB;IACAlB;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACnfA;AAAA;AAAA;AAAA;AAAmlD,CAAgB,m4CAAG,EAAC,C;;;;;;;;;;;ACAvmD;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;;;;ACNL;AAGA;AACA;AAHA;AACAG,EAAE,CAACgB,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACc;;;AAGlE;AACsN;AACtN,gBAAgB,iNAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAi2B,CAAgB,myBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;ACmDr3B;AACA;AACA;AACA;AACA;AACA;AAGA;AAAA;AAAA;AAAA;EAGAnD;IACA;MACAoD;MACAnD;MACAqC;MACAe;IACA;EACA;EACAhD,4BACA,iEACA;EACAC;IACA;MACA;IACA;IACA;;IAEA;EACA;EACAgD;IACA;EACA;EACAP;IACA;IACA;EACA;EACAQ;IACA;IACA;EACA;EACAhD,uDACA,gEACA;IACAiD;MACA3B;MACA;IACA;IACA4B;MACA;QACA9C;QACAC;UAAA8C;UAAA/D;QAAA;MACA;IACA;IACAa;MACA;QACAG;QACAC;MACA;IACA;IACA+C;MACA;QACAhD;QACAC;MACA;IACA;IACAgD;MAAA;MACA/B;MACAA;MACA;QACAR;UACAC;UACAI;UACAC;QACA;QACA;MACA;MACAN;QACAC;MACA;MACA,oBACAG;QACAJ;QACAQ;QACA;UACAlB;QACA;MACA,GACAiB;QACAP;QACAQ;QACAR;UACAC;UACAI;UACAC;QACA;MACA;IACA;IACA;IACAI;MAAA;MACAF;MACAG;QACAC;QACAC;QACAC;UACAN;UACAR;YACAC;UACA;UACA,uBACAG;YACAI;YACA;cACAlB;YACA;UACA,GACAiB;YACAC;YACAR;cACAC;cACAI;cACAC;YACA;UACA;QACA;MACA;IACA;IACAkC;MAAA;MACA,0BACApC;QACA;QACAJ;UACAgB;UACAF;YAAA;cAAA;gBAAA;kBAAA;oBAAA;sBACAN;sBAEA;sBACA;oBAAA;oBAAA;sBAAA;kBAAA;gBAAA;cAAA;YAAA,CACA;YAAA;cAAA;YAAA;YAAA;UAAA;QACA;MACA;IACA;IACA;IACAiC;MACA;QACAzC;UACAC;UACAI;UACAC;QACA;QACA;MACA;IACA;IACAoC;MAAA;MACA;QACAlC;QACAmC;QACA;UACAzC;UACAC;UACAc;UACA2B;QACA,GACAxC;UACAI;UACAR;UACA6C;UACAA;UACA,yBACAzC;YACAI;YACAR;YACA6C;YACA;cACAvD;YACA;UACA,GACAiB;YACAC;YACA;UACA;QACA,GACAD;UACAC;UACAA;UACA;QACA;MACA;QACAR;UACAC;UACAI;UACAC;QACA;MACA;IACA;EAAA;AACA,iCACA;EACA;IACA;IACAE;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC5PA;AAAA;AAAA;AAAA;AAAwjD,CAAgB,m4CAAG,EAAC,C;;;;;;;;;;;ACA5kD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/user/User/index.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=15638bee&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/user/User/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=15638bee&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"user\">\r\n    <view v-if=\"$store.getters.token || userInfo.uid\">\r\n      <view\r\n        class=\"getUserBaseData header bg-color-red acea-row row-between-wrapper\"\r\n        v-if=\"!userInfo.uid\"\r\n      >\r\n        <button\r\n          class=\"userDataBtn\"\r\n          v-if=\"canIUseGetUserProfile\"\r\n          @tap=\"getUserInfoProfile\"\r\n        >授权并查看用户信息</button>\r\n        <button\r\n          class=\"userDataBtn\"\r\n          v-else\r\n          @getuserinfo=\"getUserInfo\"\r\n          open-type=\"getUserInfo\"\r\n        >授权并查看用户信息</button>\r\n      </view>\r\n      <view\r\n        class=\"header bg-color-red acea-row row-between-wrapper\"\r\n        v-else\r\n      >\r\n        <view class=\"picTxt acea-row row-between-wrapper\">\r\n          <view class=\"pictrue\">\r\n            <image :src=\"userInfo.avatar\" />\r\n          </view>\r\n          <view class=\"text\">\r\n            <view class=\"acea-row row-middle\">\r\n              <view class=\"name line1\">{{ userInfo.nickname }}</view>\r\n              <view\r\n                class=\"member acea-row row-middle\"\r\n                v-if=\"userInfo.vip\"\r\n              >\r\n                <image :src=\"userInfo.vipIcon\" />\r\n                <text>{{ userInfo.vipName }}</text>\r\n              </view>\r\n            </view>\r\n            <view\r\n              @click=\"goPersonalData()\"\r\n              class=\"id\"\r\n              v-if=\"userInfo.phone\"\r\n            >\r\n              <text>ID：{{ userInfo.uid || 0 }}</text>\r\n              <text class=\"iconfont icon-bianji1\"></text>\r\n            </view>\r\n            <!-- #ifdef MP-WEIXIN -->\r\n            <!-- <button open-type=\"getPhoneNumber\" @getphonenumber=\"getPhoneNumber\" class=\"binding\" v-else>\r\n              <text>绑定手机号</text>\r\n            </button> -->\r\n            <!-- #endif -->\r\n\r\n            <!-- #ifndef MP-WEIXIN -->\r\n            <!-- <button class=\"binding\" @click=\"goBindPhone()\" v-else>\r\n              <text>绑定手机号</text>\r\n            </button> -->\r\n            <!-- #endif -->\r\n          </view>\r\n        </view>\r\n        <text\r\n          class=\"iconfont icon-shezhi\"\r\n          @click=\"goPersonalData()\"\r\n        ></text>\r\n      </view>\r\n      <view class=\"wrapper\">\r\n        <view class=\"nav acea-row row-middle\">\r\n          <view\r\n            @click=\"goUserAccount()\"\r\n            class=\"item\"\r\n          >\r\n            <text>我的余额</text>\r\n            <text class=\"num\">{{ userInfo.nowMoney || 0 }}</text>\r\n          </view>\r\n          <view\r\n            @click=\"goUserPromotion()\"\r\n            class=\"item\"\r\n            v-if=\"userInfo.isPromoter === 1 || userInfo.statu === 2\"\r\n          >\r\n            <text>当前佣金</text>\r\n            <text class=\"num\">{{ userInfo.brokeragePrice || 0 }}</text>\r\n          </view>\r\n          <view\r\n            @click=\"goIntegral()\"\r\n            class=\"item\"\r\n            v-else\r\n          >\r\n            <text>当前积分</text>\r\n            <text class=\"num\">{{ userInfo.integral || 0 }}</text>\r\n          </view>\r\n          <view\r\n            @click=\"goUserCoupon()\"\r\n            class=\"item\"\r\n          >\r\n            <text>优惠券</text>\r\n            <text class=\"num\">{{ userInfo.couponCount || 0 }}</text>\r\n          </view>\r\n        </view>\r\n        <view class=\"myOrder\">\r\n          <view class=\"title acea-row row-between-wrapper\">\r\n            <text>我的订单</text>\r\n            <text\r\n              @click=\"goMyOrder()\"\r\n              class=\"allOrder\"\r\n            >\r\n              <text>全部订单</text>\r\n              <text class=\"iconfont icon-jiantou\"></text>\r\n            </text>\r\n          </view>\r\n          <view\r\n            class=\"orderState acea-row row-middle\"\r\n            v-if=\"userInfo.orderStatusNum !== undefined || userInfo.orderStatusNum !== null\"\r\n          >\r\n            <view\r\n              @click=\"goMyOrder(0)\"\r\n              class=\"item\"\r\n            >\r\n              <view class=\"pictrue\">\r\n                <image :src=\"`${$VUE_APP_RESOURCES_URL}/images/dfk.png`\" />\r\n                <text\r\n                  class=\"order-status-num\"\r\n                  v-if=\"userInfo.orderStatusNum.unpaidCount > 0\"\r\n                >{{ userInfo.orderStatusNum.unpaidCount }}</text>\r\n              </view>\r\n              <view>待付款</view>\r\n            </view>\r\n            <view\r\n              @click=\"goMyOrder(1)\"\r\n              class=\"item\"\r\n            >\r\n              <view class=\"pictrue\">\r\n                <image :src=\"`${$VUE_APP_RESOURCES_URL}/images/dfh.png`\" />\r\n                <text\r\n                  class=\"order-status-num\"\r\n                  v-if=\"userInfo.orderStatusNum.unshippedCount > 0\"\r\n                >{{ userInfo.orderStatusNum.unshippedCount }}</text>\r\n              </view>\r\n              <view>待发货</view>\r\n            </view>\r\n            <view\r\n              @click=\"goMyOrder(2)\"\r\n              class=\"item\"\r\n            >\r\n              <view class=\"pictrue\">\r\n                <image :src=\"`${$VUE_APP_RESOURCES_URL}/images/dsh.png`\" />\r\n                <text\r\n                  class=\"order-status-num\"\r\n                  v-if=\"userInfo.orderStatusNum.receivedCount > 0\"\r\n                >{{ userInfo.orderStatusNum.receivedCount }}</text>\r\n              </view>\r\n              <text>待收货</text>\r\n            </view>\r\n            <view\r\n              @click=\"goMyOrder(3)\"\r\n              class=\"item\"\r\n            >\r\n              <view class=\"pictrue\">\r\n                <image :src=\"`${$VUE_APP_RESOURCES_URL}/images/dpj.png`\" />\r\n                <text\r\n                  class=\"order-status-num\"\r\n                  v-if=\"userInfo.orderStatusNum.evaluatedCount > 0\"\r\n                >{{ userInfo.orderStatusNum.evaluatedCount }}</text>\r\n              </view>\r\n              <text>待评价</text>\r\n            </view>\r\n            <view\r\n              @click=\"goReturnList()\"\r\n              class=\"item\"\r\n            >\r\n              <view class=\"pictrue\">\r\n                <image :src=\"`${$VUE_APP_RESOURCES_URL}/images/sh.png`\" />\r\n                <text\r\n                  class=\"order-status-num\"\r\n                  v-if=\"userInfo.orderStatusNum.refundCount > 0\"\r\n                >{{ userInfo.orderStatusNum.refundCount }}</text>\r\n              </view>\r\n              <text>售后/退款</text>\r\n            </view>\r\n          </view>\r\n        </view>\r\n        <view class=\"myService\">\r\n          <view class=\"serviceList acea-row row-middle\">\r\n            <template v-for=\"(item, MyMenusIndex) in MyMenus\">\r\n              <view\r\n                class=\"item\"\r\n                :key=\"MyMenusIndex\"\r\n                @click=\"goPages(MyMenusIndex)\"\r\n              >\r\n                <view class=\"pictrue\">\r\n                  <image :src=\"item.pic\" />\r\n                </view>\r\n                <view class=\"cell\">{{ item.name }}</view>\r\n                <text class=\"iconfont icon-jiantou\"></text>\r\n              </view>\r\n            </template>\r\n          </view>\r\n        </view>\r\n      </view>\r\n      <view class=\"by\">\r\n        <view>\r\n          <text class=\"by-text\">www.yixiang.co提供技术支持</text>\r\n        </view>\r\n      </view>\r\n      <!-- <SwitchWindow\r\n        v-on:changeswitch=\"changeswitch\"\r\n        :switchActive=\"switchActive\"\r\n        :login_type=\"userInfo.login_type\"\r\n      ></SwitchWindow>-->\r\n    </view>\r\n    <Authorization\r\n      v-else\r\n      ref=\"authorization\"\r\n    />\r\n  </view>\r\n</template>\r\n<script>\r\nimport { mapState, mapGetters, mapMutations, mapActions } from 'vuex'\r\nimport { getUserInfo, getMenuUser, wxappAuth, bindingPhone, wxappBindingPhone, wxappGetUserInfo } from '@/api/user'\r\nimport { isWeixin, VUE_APP_RESOURCES_URL, parseQuery, getProvider } from '@/utils'\r\nimport SwitchWindow from '@/components/SwitchWindow'\r\nimport Authorization from '@/pages/authorization/index'\r\nimport cookie from '@/utils/store/cookie'\r\n\r\nconst NAME = 'User'\r\n\r\nexport default {\r\n  name: NAME,\r\n  components: {\r\n    SwitchWindow,\r\n    Authorization,\r\n  },\r\n  props: {},\r\n  data: function () {\r\n    return {\r\n      canIUseGetUserProfile: false,\r\n      MyMenus: [],\r\n      switchActive: false,\r\n      isWeixin: false,\r\n    }\r\n  },\r\n  computed: mapGetters(['userInfo']),\r\n  onLoad() {\r\n    if (wx.getUserProfile) {\r\n      this.canIUseGetUserProfile = true\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapMutations(['updateAuthorizationPage']),\r\n    toLogin() {\r\n      this.$yrouter.push('/pages/user/Login/index')\r\n    },\r\n    goReturnList() {\r\n      this.$yrouter.push('/pages/order/ReturnList/index')\r\n    },\r\n    goMyOrder(type) {\r\n      this.$yrouter.push({\r\n        path: '/pages/order/MyOrder/index',\r\n        query: {\r\n          type,\r\n        },\r\n      })\r\n    },\r\n    goBindPhone() {\r\n      this.$yrouter.push('/pages/user/BindingPhone/index')\r\n    },\r\n    goUserCoupon() {\r\n      this.$yrouter.push('/pages/user/coupon/UserCoupon/index')\r\n    },\r\n    goIntegral() {\r\n      this.$yrouter.push('/pages/user/signIn/Integral/index')\r\n    },\r\n    goUserPromotion() {\r\n      this.$yrouter.push('/pages/user/promotion/UserPromotion/index')\r\n    },\r\n    goUserAccount() {\r\n      this.$yrouter.push('/pages/user/UserAccount/index')\r\n    },\r\n    goPersonalData() {\r\n      this.$yrouter.push('/pages/user/PersonalData/index')\r\n    },\r\n    getPhoneNumber(e) {\r\n      // 判断一下这里是不是小程序 如果是小程序，走获取微信手机号进行绑定\r\n      if (e.mp.detail.errMsg == 'getPhoneNumber:ok') {\r\n        uni.showLoading({\r\n          title: '绑定中',\r\n        })\r\n        wxappBindingPhone({\r\n          encryptedData: e.mp.detail.encryptedData,\r\n          iv: e.mp.detail.iv,\r\n        })\r\n          .then(res => {\r\n            // this.User();\r\n            this.$store.dispatch('userInfo', true)\r\n            uni.hideLoading()\r\n            uni.showToast({\r\n              title: res.msg,\r\n              icon: 'success',\r\n              duration: 2000,\r\n            })\r\n          })\r\n          .catch(error => {\r\n            uni.hideLoading()\r\n            this.$store.dispatch('userInfo', true)\r\n            console.log(error)\r\n            uni.showToast({\r\n              title: error.msg || error.response.data.msg || error.response.data.message,\r\n              icon: 'none',\r\n              duration: 2000,\r\n            })\r\n          })\r\n        // // 获取当前环境的服务商\r\n        // uni.getProvider({\r\n        //   service: \"oauth\",\r\n        //   success: function (res) {\r\n        //     // 此处可以排除h5\r\n        //     if (res.provider) {\r\n        //       uni.login({\r\n        //         success: loginRes => {\r\n        //           bindingPhone({\r\n        //               code: loginRes.code,\r\n        //               encryptedData: e.mp.detail.encryptedData,\r\n        //               iv: e.mp.detail.iv\r\n        //             })\r\n        //             .then(res => {\r\n        //               // this.User();\r\n        //               this.$store.dispatch(\"userInfo\", true);\r\n        //               uni.hideLoading();\r\n        //               uni.showToast({\r\n        //                 title: res.msg,\r\n        //                 icon: \"success\",\r\n        //                 duration: 2000\r\n        //               });\r\n        //             })\r\n        //             .catch(error => {\r\n        //               uni.hideLoading();\r\n        //               this.$store.dispatch(\"userInfo\", true);\r\n        //               console.log(error);\r\n        //               uni.showToast({\r\n        //                 title: error.msg ||\r\n        //                   error.response.data.msg ||\r\n        //                   error.response.data.message,\r\n        //                 icon: \"none\",\r\n        //                 duration: 2000\r\n        //               });\r\n        //             });\r\n        //         },\r\n        //         fail() {\r\n        //           reject(\"绑定失败\");\r\n        //         }\r\n        //       });\r\n        //     }\r\n        //   },\r\n        //   fail() {\r\n        //     reject(\"获取环境服务商失败\");\r\n        //   }\r\n        // });\r\n      } else {\r\n        uni.showToast({\r\n          title: '已拒绝授权',\r\n          icon: 'none',\r\n          duration: 2000,\r\n        })\r\n      }\r\n    },\r\n    // 获取用户授权，读取头像、昵称\r\n    getUserInfo(data) {\r\n      if (data.detail.errMsg == 'getUserInfo:fail auth deny') {\r\n        uni.showToast({\r\n          title: '取消授权',\r\n          icon: 'none',\r\n          duration: 2000,\r\n        })\r\n        return\r\n      }\r\n    },\r\n    // 申请获取用户信息\r\n    getUserInfoProfile(data) {\r\n      wx.getUserProfile({\r\n        lang: 'zh_CN',\r\n        desc: '需要获取您的信息用来展示',\r\n        success: res => {\r\n          uni.showLoading({\r\n            title: '正在更新信息...',\r\n            duration: 2000,\r\n          })\r\n          getProvider().then(provider => {\r\n            // 环境提供商\r\n            if (!provider) {\r\n              reject()\r\n            }\r\n            // 获取开发code\r\n            uni.login({\r\n              provider: provider,\r\n              success: async loginRes => {\r\n                wxappGetUserInfo({\r\n                  encryptedData: res.encryptedData,\r\n                  iv: res.iv,\r\n                  code: loginRes.code, // 开发code\r\n                }).then(res => {\r\n                  if (res.status === 200) {\r\n                    this.userInfo.avatar = res.data.avatar\r\n                    this.userInfo.nickname = res.data.nickname\r\n                  } else {\r\n                    uni.showLoading({\r\n                      title: res.msg,\r\n                      duration: 2000,\r\n                    })\r\n                  }\r\n                })\r\n              },\r\n            })\r\n          })\r\n        },\r\n      })\r\n    },\r\n    changeswitch(data) {\r\n      this.switchActive = data\r\n    },\r\n    // 获取用户信息\r\n    MenuUser() {\r\n      getMenuUser()\r\n        .then(res => {\r\n          uni.hideLoading()\r\n          this.MyMenus = res.data.routine_my_menus\r\n        })\r\n        .catch(error => {\r\n          uni.hideLoading()\r\n          console.log(error)\r\n        })\r\n    },\r\n    goPages(index) {\r\n      let url = this.MyMenus[index].uniapp_url\r\n      if (url === '/pages/user/promotion/UserPromotion/index' && this.userInfo.statu === 1) {\r\n        if (!this.userInfo.isPromoter) {\r\n          uni.showToast({\r\n            title: '您还没有推广权限！！',\r\n            icon: 'none',\r\n            duration: 2000,\r\n          })\r\n          return\r\n        }\r\n      }\r\n\r\n      if (url === '/pages/orderAdmin/OrderIndex/index' && !this.userInfo.adminid) {\r\n        uni.showToast({\r\n          title: '您还不是管理员！！',\r\n          icon: 'none',\r\n          duration: 2000,\r\n        })\r\n        return\r\n      }\r\n      console.log(this.userInfo)\r\n      if (url === '/pages/orderAdmin/OrderCancellation/index' && !this.userInfo.checkStatus) {\r\n        uni.showToast({\r\n          title: '您没有核销权限,请后台店员设置！！',\r\n          icon: 'none',\r\n          duration: 2000,\r\n        })\r\n        return\r\n      }\r\n\r\n      this.$yrouter.push({\r\n        path: this.MyMenus[index].uniapp_url,\r\n      })\r\n    },\r\n    goPages2() {\r\n      this.$yrouter.push({\r\n        path: '/pages/shop/GoodsList/index',\r\n        query: {\r\n          // id: 0,\r\n          title: '积分商城',\r\n          isIntegral: true,\r\n        },\r\n      })\r\n    },\r\n  },\r\n  watch: {\r\n    userInfo() {\r\n      this.MenuUser()\r\n    },\r\n  },\r\n  onShow() {\r\n    if (!this.$store.getters.token && !this.userInfo.uid) {\r\n      this.$refs.authorization.getLoginCode()\r\n    }\r\n    if (this.$store.getters.token) {\r\n\t\tconsole.log('userInfo11:',this.$store.getters.token)\r\n      //\r\n      uni.showLoading({\r\n        title: '加载中',\r\n      })\r\n      this.$store.dispatch('getUser', true)\r\n      this.MenuUser()\r\n      this.isWeixin = isWeixin()\r\n    }\r\n  },\r\n  onHide() {\r\n    console.log('离开用户中心')\r\n    this.updateAuthorizationPage(false)\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.getUserBaseData {\r\n  .userDataBtn {\r\n    width: 80%;\r\n    height: 80rpx;\r\n    background: linear-gradient(to right, #f35447 0%, #ff8e3c 100%);\r\n    background: -moz-linear-gradient(to right, #f35447 0%, #ff8e3c 100%);\r\n    border-radius: 40rpx;\r\n    font-size: 30rpx;\r\n    font-family: PingFang SC;\r\n    font-weight: 500;\r\n    color: rgba(255, 255, 255, 1);\r\n  }\r\n}\r\n\r\n.footer-line-height {\r\n  height: 1 * 100rpx;\r\n}\r\n\r\n.order-status-num {\r\n  min-width: 0.33 * 100rpx;\r\n  background-color: #fff;\r\n  color: #eb3729;\r\n  border-radius: 15px;\r\n  position: absolute;\r\n  right: -0.14 * 100rpx;\r\n  top: -0.15 * 100rpx;\r\n  font-size: 0.2 * 100rpx;\r\n  padding: 0 0.08 * 100rpx;\r\n  border: 1px solid #eb3729;\r\n}\r\n\r\n.pictrue {\r\n  position: relative;\r\n}\r\n\r\n.switch-h5 {\r\n  margin-left: 0.2 * 100rpx;\r\n}\r\n\r\n.binding {\r\n  margin-top: 0.1 * 100rpx;\r\n  display: inline-block;\r\n  padding: 0.05 * 100rpx 0.2 * 100rpx;\r\n  background-color: #ca1f10;\r\n  border-radius: 50px;\r\n  font-size: 0.22 * 100rpx;\r\n  line-height: 1.5;\r\n  border: 1px solid #e8695e;\r\n  color: #ffffff;\r\n}\r\n\r\n.by {\r\n  text-align: center;\r\n  padding: 30rpx 0;\r\n}\r\n\r\n.by-text {\r\n  text-align: center;\r\n  font-size: 24rpx;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=less&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1739765284184\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/user/User/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=7ba8a2d3&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/authorization/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=7ba8a2d3&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"container\">\r\n    <!-- #ifdef MP-WEIXIN -->\r\n    <view\r\n      v-if=\"!token\"\r\n      class=\"force-login-wrap\"\r\n    >\r\n      <view class=\"force-login__content y-f\">\n\t\t<image src=\"@/static/120x120.png\" style=\"width: 100rpx; height: 100rpx;border-radius: 100rpx;\"></image>\r\n        <view class=\"login-notice\">YSHOP电商系统</view>\r\n        <button\r\n          class=\"cu-btn author-btn\"\r\n          open-type=\"getPhoneNumber\"\r\n          @getphonenumber=\"phoneLogin\"\n\t\t  v-if=\"isChecked\"\r\n        >手机号快捷登录</button>\n\t\t<button\n\t\t  v-else\n\t\t  class=\"cu-btn author-btn\"\n\t\t  @tap=\"phoneLoginBefore\"\n\t\t>手机号快捷登录</button>\r\n        <button\r\n          class=\"cu-btn close-btn\"\r\n          @tap=\"toLogin\"\r\n        >其他手机登录</button>\r\n      </view>\r\n    </view>\n\t<view class=\"hint\">\n\t\t<radio  :checked=\"isChecked\" @tap.stop=\"onChange\" />\n\t\t我已经阅读并遵守\n\t\t<text class=\"link\" @tap=\"goNewsDetail(50,'用户协议')\">《用户协议》</text>与\n\t\t\t<text class=\"link\"  @tap=\"goNewsDetail(49,'隐私政策')\">《隐私政策》</text>\n\t\t\t<!--上面协议是固定的 请添加相应id文章-->\n\t</view>\r\n    <!-- #endif -->\r\n    <!-- #ifndef MP-WEIXIN -->\r\n    <view class=\"force-login-wrap\">\r\n      <!-- <image class=\"logo-bg\" :src=\"`${$VUE_APP_RESOURCES_URL}/images/logo_bg.png`\" mode=\"aspectFill\"></image> -->\r\n      <view class=\"force-login__content y-f\">\r\n        <view class=\"login-notice\">为了提供更优质的服务，请先登录</view>\r\n        <button\r\n          class=\"cu-btn author-btn\"\r\n          @tap=\"toLogin\"\r\n        >去登录</button>\r\n      </view>\r\n    </view>\r\n    <!-- #endif -->\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapMutations, mapActions } from 'vuex'\r\nimport { wxappAuth, getUser, getUserInfo } from '@/api/user'\r\nimport { login, authorize, getProvider } from '@/utils'\r\nimport dayjs from 'dayjs'\r\nimport cookie from '@/utils/store/cookie'\r\nimport store from '@/store'\r\n\r\n// 公众号登录\r\nimport { auth } from '@/libs/wechat.js'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      authorize: false,\r\n      canIUseGetUserProfile: false,\r\n      code: '',\n\t  isChecked: false\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(['isAuthorization', '$deviceType', 'token']),\r\n  },\r\n  onLoad() {\r\n    if (wx.getUserProfile) {\r\n      this.canIUseGetUserProfile = true\r\n    }\r\n    this.getLoginCode()\r\n\r\n    // // 先校验用户是否授权，如果没有授权，显示授权按钮\r\n  },\r\n  mounted() {\r\n    this.getLoginCode()\r\n  },\r\n  onHide() {\r\n    this.updateAuthorizationPage(false)\r\n    this.changeAuthorization(false)\r\n  },\r\n  onUnload() {\r\n    this.updateAuthorizationPage(false)\r\n    this.changeAuthorization(false)\r\n  },\r\n  methods: {\r\n    ...mapActions(['changeAuthorization', 'setUserInfo']),\r\n    ...mapMutations(['updateAuthorizationPage']),\n\tonChange() {\n\t\tconsole.log('isChecked;',this.isChecked)\n\t\tthis.isChecked = !this.isChecked\n\t},\n\tgoNewsDetail(id,name) {\n\t  this.$yrouter.push({\n\t    path: \"/pages/shop/news/NewsDetail/index\",\n\t    query: { id: id,name:name }\n\t  });\n\t},\r\n    toLogin() {\r\n      this.$yrouter.push({\r\n        path: '/pages/user/Login/index',\r\n        query: {},\r\n      })\r\n    },\r\n    back() {\r\n      this.$yrouter.switchTab({\r\n        path: '/pages/home/index',\r\n        query: {},\r\n      })\r\n    },\r\n    getUserInfoBtn(data) {\r\n      console.log(data)\r\n      console.log('getUserInfoBtn')\r\n      if (data.detail.errMsg == 'getUserInfo:fail auth deny') {\r\n        uni.showToast({\r\n          title: '取消授权',\r\n          icon: 'none',\r\n          duration: 2000,\r\n        })\r\n        return\r\n      }\r\n      uni.showLoading({\r\n        title: '登录中',\r\n      })\r\n      login()\r\n        .then(e => {\r\n          uni.hideLoading()\r\n          console.log('重定向')\r\n          this.$yrouter.reLaunch({\r\n            path: cookie.get('redirect').replace(/\\ /g, ''),\r\n          })\r\n        })\r\n        .catch(error => {\r\n          uni.hideLoading()\r\n          console.log(error)\r\n          uni.showToast({\r\n            title: error,\r\n            icon: 'none',\r\n            duration: 2000,\r\n          })\r\n        })\r\n    },\r\n    // 申请获取用户信息\r\n    getUserInfoProfile(data) {\r\n      console.log('getUserInfoProfile')\r\n      wx.getUserProfile({\r\n        lang: 'zh_CN',\r\n        desc: '需要获取您的信息用来展示',\r\n        success: res => {\r\n          console.log('用户信息', res)\r\n          uni.showLoading({\r\n            title: '登录中',\r\n          })\r\n          login(res)\r\n            .then(e => {\r\n              console.log('重定向')\r\n              this.$yrouter.reLaunch({\r\n                path: cookie.get('redirect').replace(/\\ /g, ''),\r\n              })\r\n            })\r\n            .catch(error => {\r\n              console.log(error)\r\n              uni.showToast({\r\n                title: error,\r\n                icon: 'none',\r\n                duration: 2000,\r\n              })\r\n            })\r\n        },\r\n      })\r\n    },\r\n    getLoginCode() {\r\n      getProvider()\r\n        .then(provider => {\r\n          // uni登录\r\n          uni.login({\r\n            provider: provider,\r\n            success: async loginRes => {\r\n              console.log(\"🚀 ~ file: index.vue:171 ~ getLoginCode ~ loginRes:\", loginRes)\n\t\t\t  \r\n              this.code = loginRes.code\n\t\t\t  //console.log('code11:',this.code)\r\n            }\r\n          })\r\n        })\r\n    },\r\n    // 微信用户手机号登录\n\tphoneLoginBefore() {\n\t\tif(!this.isChecked) {  \n\t\t\t  uni.showToast({\n\t\t\t\ttitle: '请勾选下面协议',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 2000,\n\t\t\t  })\n\t\t\t  return\n\t\t}\n\t},\r\n    phoneLogin(e) {\r\n      if (e.mp.detail.errMsg == 'getPhoneNumber:ok') {\r\n        console.log('wxLoginCode', this.code)\r\n        cookie.set('wxLoginCode', this.code)\r\n        wxappAuth({\r\n          encryptedData: e.mp.detail.encryptedData,\r\n          iv: e.mp.detail.iv,\r\n          code: this.code,\r\n          spread: cookie.get('spread'),\r\n        })\r\n          .then(res => {\r\n            console.log('登录成功,开始处理登录信息保存，并获取用户详情')\r\n            uni.hideLoading()\r\n            store.commit('login', res.data.token, dayjs(res.data.expires_time))\r\n            store.dispatch('userInfo', true)\r\n            getUserInfo()\r\n              .then(user => {\r\n                console.log('获取用户信息成功')\r\n                uni.setStorageSync('uid', user.data.uid)\r\n                store.dispatch('setUserInfo', user.data)\r\n                this.$yrouter.reLaunch({\r\n                  path: cookie.get('redirect').replace(/\\ /g, ''),\r\n                })\r\n              })\r\n              .catch(error => {\r\n                console.log('获取用户信息失败')\r\n                this.getLoginCode()\r\n              })\r\n          })\r\n          .catch(error => {\r\n            console.log(error)\r\n            console.log('登录接口调用失败')\r\n            this.getLoginCode()\r\n          })\r\n      } else {\r\n        uni.showToast({\r\n          title: '已拒绝授权',\r\n          icon: 'none',\r\n          duration: 2000,\r\n        })\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    if (wx.getUserProfile) {\r\n      this.canIUseGetUserProfile = true\r\n      console.log(this.canIUseGetUserProfile)\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\n.hint {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tpadding: 20rpx 40rpx;\n\tfont-size: 25rpx;\n\tcolor: #000;\n\t\n\t.link {\n\t\tcolor: #ff8e3c;\n\t}\n}\r\n.container {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: flex-start;\r\n  position: relative;\r\n}\r\n\r\n.force-login-wrap {\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: hidden;\r\n  z-index: 11111;\r\n  top: 0;\r\n\r\n  .logo-bg {\r\n    width: 640rpx;\r\n    height: 300rpx;\r\n  }\r\n\r\n  .force-login__content {\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 50%;\r\n    transform: translate(-50%, -50%);\r\n\r\n    .user-avatar {\r\n      width: 160rpx;\r\n      height: 160rpx;\r\n      border-radius: 50%;\r\n      overflow: hidden;\r\n      margin-bottom: 40rpx;\r\n    }\r\n\r\n    .user-name {\r\n      font-size: 35rpx;\r\n      font-family: PingFang SC;\r\n      font-weight: bold;\r\n      color: #000;\r\n      margin-bottom: 30rpx;\r\n    }\r\n\r\n    .login-notice {\r\n      font-size: 28rpx;\r\n      font-family: PingFang SC;\r\n      font-weight: 400;\r\n      color: #000;\r\n      line-height: 44rpx;\r\n      width: 500rpx;\r\n      text-align: center;\r\n      margin-bottom: 80rpx;\r\n    }\r\n\r\n    .author-btn {\r\n      width: 630rpx;\r\n      height: 80rpx;\r\n      background: linear-gradient(to right, #f35447 0%, #ff8e3c 100%);\r\n      background: -moz-linear-gradient(to right, #f35447 0%, #ff8e3c 100%);\r\n      // box-shadow: 0px 7rpx 6rpx 0px rgba(229, 138, 0, 0.22);\r\n      border-radius: 40rpx;\r\n      font-size: 30rpx;\r\n      font-family: PingFang SC;\r\n      font-weight: 500;\r\n      color: rgba(255, 255, 255, 1);\r\n    }\r\n\r\n    .close-btn {\r\n      width: 630rpx;\r\n      height: 80rpx;\r\n      margin-top: 30rpx;\r\n      border-radius: 40rpx;\r\n      border: 2rpx solid #eb3729;\r\n      background: none;\r\n      font-size: 30rpx;\r\n      font-family: PingFang SC;\r\n      font-weight: 500;\r\n      color: #eb3729;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=less&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1739765281843\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}